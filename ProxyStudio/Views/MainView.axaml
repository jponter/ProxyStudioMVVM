<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:li="using:LoadingIndicators.Avalonia"
        xmlns:views="clr-namespace:ProxyStudio.Views"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
        Width="1400"
        Height="900"
        Background="#303030"
        Foreground="Yellow"
   
        x:Class="ProxyStudio.MainView"
        xmlns:vm="clr-namespace:ProxyStudio.ViewModels"
        xmlns:behaviors="clr-namespace:ProxyStudio.Behaviors"
        x:DataType="vm:MainViewModel"
        Title="ProxyStudio">
    
    <!-- Revert to original design-time DataContext -->
    <Design.DataContext>
        <vm:DesignTimeMainViewModel />
    </Design.DataContext>
    
    <Grid >
       <TabControl>
           <TabItem Header="Cards" >
               <!-- Card Management Page -->
               <Grid ShowGridLines="False" >
                   <Grid.ColumnDefinitions>250,*,550</Grid.ColumnDefinitions>
                   <!-- Card Management Actions -->
                   <StackPanel Grid.Column="0" Spacing="10" Margin="0,10,20,0">
                       <Button Content="Add Single Card" HorizontalAlignment="Stretch" />
                       <Button Content="Add Cards from MPC XML" HorizontalAlignment="Stretch" />
                       <Button Content="Load Test Cards" HorizontalAlignment="Stretch" Command="{Binding AddTestCardsRelayCommand}"/>
                       <li:LoadingIndicator Foreground="AliceBlue" IsActive="{Binding IsBusy}" Mode="ThreeDots" SpeedRatio="1.2" ></li:LoadingIndicator>
                   </StackPanel>

                   <!-- Main Card Grid View -->
                   <ScrollViewer  Grid.Column="1" Margin="0,0,0,0" >
                       <!-- use a List box -->
                       <ListBox x:Name="CardGrid"
                       
                                ItemsSource="{Binding Cards}"
                                SelectedItem="{Binding SelectedCard, Mode=TwoWay}"
                                DragDrop.AllowDrop="True"
                                BorderBrush="Gray" BorderThickness="1"
                                Background="Transparent"
                       
                                >
                       
                           <ListBox.ItemsPanel>
                               <ItemsPanelTemplate>
                                   <UniformGrid Columns="3"/>
                               </ItemsPanelTemplate>
                           </ListBox.ItemsPanel>
                       
                           <ListBox.ItemTemplate>
                               <DataTemplate>
                                   <StackPanel Margin="4" Background="Transparent" >
                                       <Label Content="{Binding Name}" FontSize="10"></Label>
                       
                                       <Image Source="{Binding ImageSource}"
                                              Stretch="UniformToFill"/>
                                       <StackPanel Orientation="Horizontal">
                                           <Button Content="&lt;"></Button>
                                           <Button Content="&gt;"/>
                                       </StackPanel>
                                   </StackPanel>
                               </DataTemplate>
                           </ListBox.ItemTemplate>
                       </ListBox>
                   </ScrollViewer>
                   
                   <!-- Card Editor Panel -->
                   <StackPanel Grid.Column="2" Margin="20,0, 0, 0" VerticalAlignment="Top">
                       <Image Source="{Binding SelectedCard.ImageSource}" 
                               Height="480" 
                              Stretch="Uniform"/>
    
                       <CheckBox Content="Enable Bleed"
                                 IsChecked="{Binding SelectedCard.EnableBleed}"
                                 Margin="15"/>
    
                       <!-- Add other card editing controls here -->
                       <TextBox Text="{Binding SelectedCard.Name}"
                                IsEnabled="False"
                                Watermark="Card Name"
                                Margin="15"/>
                   </StackPanel>
               </Grid>
           </TabItem>
           
           <!-- Printing Tab -->
           <TabItem Header="Printing">
               <views:PrintingView DataContext="{Binding PrintViewModel}"/>
           </TabItem>
           
           <!-- Settings Tab -->
           <TabItem Header="Settings">
               <StackPanel>
                   <StackPanel Orientation="Horizontal">
                       <Label Content="Global Bleed Enable"></Label>
                       <CheckBox IsChecked="{Binding GlobalBleedEnabled}"></CheckBox>
                   </StackPanel>
               </StackPanel>
           </TabItem>
       </TabControl>
    </Grid>
</Window>